<?php	include_once($_SERVER['DOCUMENT_ROOT'] . '/api/core/database.php');	include_once($_SERVER['DOCUMENT_ROOT'] . '/api/core/cas.php');		class Admin {				//Adds an admin		//Usage: addAdmin( $user, $first, $last, $email )		public static function addAdmin( $username, $first, $last, $email ) {						$db = self::connect();						$query = "	SELECT *						FROM admins						WHERE username='".$username."'				";							$db->query($query);						if ( $db->fetch_row_assoc() ) {				echo 'Already an Admin';				return false;			}						$query = "	INSERT INTO admins ( username, first_name, last_name, email )						VALUES ('".$username."', '".$first."', '".$last."', '".$email."');				";							if( $db->query($query) ){				echo 'Admin Created!';				return true;			}			else				return false;					}				//Removes an admin		//Usage: removeAdmin( $admin )		public static function removeAdmin( $username ) {					$db = self::connect();						$query = "	DELETE						FROM admins						WHERE username='".$username."'				";							if( $db->query($query) )				return true;			else				return false;		}				//Echos room information		//Usage: roomInfo( $room_id )		public static function roomInfo( $room_id ) {					$db = self::connect();						$query = "	SELECT b.name, r.number						FROM rooms r JOIN buildings b ON r.building_id = b.building_id						WHERE r.room_id='".$room_id."'					";					$db->query($query);			$row = $db->fetch_row_assoc();			echo ''.$row['name'].' '.$row['number'];					}				public static function registerUser( $rcsid, $room_id ) {					$db = self::connect();									//Make sure the room has enough slots remaining			$query = "	SELECT *						FROM rooms						WHERE room_id='".$room_id."'					";			$db->query($query);			$row = $db->fetch_row_assoc();			if( $row['currentpeople'] >= $row['totalpeople'] ){				return 'This room is already full.';			}			else				$currentpeople = $row['currentpeople'];							//Add user to the user table			if ( self::addUser( $rcsid, $room_id ) )				return 'User is already registered.';						//All Increment room current users			$query = "	UPDATE rooms						SET currentpeople = ".$currentpeople." + 1						WHERE room_id='".$room_id."'					";			$db->query($query);						return 0;							}				public static function checkRoomStatus( $user ){						$db = self::connect();						//Check if User is in Lottery			$db->query("							SELECT b.name, r.number							FROM users u JOIN rooms r ON u.room_id = r.room_id JOIN buildings b ON b.building_id = r.building_id							WHERE u.rcsid = '".$user."'							");					$row = $db->fetch_row_assoc();						//User has a room			if( $row != null ){				echo $user.' is in '.$row['name'].' '.$row['number'];				echo '<br /><input type="submit" id="remove" value="Remove User">';			}			else				echo $user.' is not registered in a room.';		}				public static function removeFromRoom( $user ){						$db = self::connect();						//Check if User has room			$db->query("							SELECT r.room_id, r.currentpeople							FROM users u JOIN rooms r ON u.room_id = r.room_id							WHERE u.rcsid = '".$user."'							");					$row = $db->fetch_row_assoc();						if( $row == null )				echo 'Error: User does not have room';			else {							//All decrement room current users				$query = "	UPDATE rooms							SET currentpeople = ".$row['currentpeople']." - 1							WHERE room_id='".$row['room_id']."'						";				$db->query($query);								//Delete User				$query = "	DELETE							FROM users							WHERE rcsid='".$user."'				";								$db->query($query);								echo $user. ' Removed';								}			}											//------------------------------------------		//------------------------------------------		//------------------------------------------				private function connect(){			$db = new database();			require($_SERVER['DOCUMENT_ROOT'] . '.../api/core/config.php');			if( $db->connect($ROLES["remote"]) )				echo '';			else				echo 'Error Cannot Connect to Database';							return $db;			}						private static function addUser( $rcsid, $room_id ){					$db = self::connect();						//Check if user already exsits			$query = "	SELECT *						FROM users						WHERE rcsid='".$rcsid."'					";					$db->query($query);			$row = $db->fetch_row_assoc();			if( $row != null ){				return 1;			}						//Add user			$query = "	INSERT INTO users ( rcsid, room_id )						VALUES ('".$rcsid."', ".$room_id." )					";					$db->query($query);						return 0;		}					}			?>